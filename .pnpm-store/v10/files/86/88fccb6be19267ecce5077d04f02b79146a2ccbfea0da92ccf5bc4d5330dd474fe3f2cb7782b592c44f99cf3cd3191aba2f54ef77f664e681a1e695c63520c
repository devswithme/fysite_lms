{"version":3,"file":"SetStepNav.js","names":["c","_c","getTranslation","useConfig","useLocale","useStepNav","useTranslation","fieldAffectsData","formatAdminURL","useEffect","SetStepNav","t0","$","id","collectionConfig","globalConfig","isTrashed","versionToCreatedAtFormatted","versionToID","versionToUseAsTitle","config","setStepNav","i18n","t","locale","t1","t2","routes","t3","admin","adminRoute","collectionSlug","slug","useAsTitle","pluralLabel","labels","plural","docLabel","fields","titleField","find","f","name","localized","code","docBasePath","nav","label","url","path","push","undefined","globalSlug"],"sources":["../../../../src/views/Version/Default/SetStepNav.tsx"],"sourcesContent":["'use client'\n\nimport type { ClientCollectionConfig, ClientGlobalConfig } from 'payload'\nimport type React from 'react'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport { useConfig, useLocale, useStepNav, useTranslation } from '@payloadcms/ui'\nimport { fieldAffectsData, formatAdminURL } from 'payload/shared'\nimport { useEffect } from 'react'\n\nexport const SetStepNav: React.FC<{\n  readonly collectionConfig?: ClientCollectionConfig\n  readonly globalConfig?: ClientGlobalConfig\n  readonly id?: number | string\n  readonly isTrashed?: boolean\n  versionToCreatedAtFormatted?: string\n  versionToID?: string\n  versionToUseAsTitle?: string\n}> = ({\n  id,\n  collectionConfig,\n  globalConfig,\n  isTrashed,\n  versionToCreatedAtFormatted,\n  versionToID,\n  versionToUseAsTitle,\n}) => {\n  const { config } = useConfig()\n  const { setStepNav } = useStepNav()\n  const { i18n, t } = useTranslation()\n  const locale = useLocale()\n\n  useEffect(() => {\n    const {\n      routes: { admin: adminRoute },\n    } = config\n\n    if (collectionConfig) {\n      const collectionSlug = collectionConfig.slug\n\n      const useAsTitle = collectionConfig.admin?.useAsTitle || 'id'\n      const pluralLabel = collectionConfig.labels?.plural\n      let docLabel = `[${t('general:untitled')}]`\n\n      const fields = collectionConfig.fields\n\n      const titleField = fields.find(\n        (f) => fieldAffectsData(f) && 'name' in f && f.name === useAsTitle,\n      )\n\n      if (titleField && versionToUseAsTitle) {\n        docLabel =\n          'localized' in titleField && titleField.localized\n            ? versionToUseAsTitle?.[locale.code] || docLabel\n            : versionToUseAsTitle\n      } else if (useAsTitle === 'id') {\n        docLabel = versionToID\n      }\n\n      const docBasePath: `/${string}` = isTrashed\n        ? `/collections/${collectionSlug}/trash/${id}`\n        : `/collections/${collectionSlug}/${id}`\n\n      const nav = [\n        {\n          label: getTranslation(pluralLabel, i18n),\n          url: formatAdminURL({\n            adminRoute,\n            path: `/collections/${collectionSlug}`,\n          }),\n        },\n      ]\n\n      if (isTrashed) {\n        nav.push({\n          label: t('general:trash'),\n          url: formatAdminURL({\n            adminRoute,\n            path: `/collections/${collectionSlug}/trash`,\n          }),\n        })\n      }\n\n      nav.push(\n        {\n          label: docLabel,\n          url: formatAdminURL({\n            adminRoute,\n            path: docBasePath,\n          }),\n        },\n        {\n          label: 'Versions',\n          url: formatAdminURL({\n            adminRoute,\n            path: `${docBasePath}/versions`,\n          }),\n        },\n        {\n          label: versionToCreatedAtFormatted,\n          url: undefined,\n        },\n      )\n\n      setStepNav(nav)\n      return\n    }\n\n    if (globalConfig) {\n      const globalSlug = globalConfig.slug\n\n      setStepNav([\n        {\n          label: globalConfig.label,\n          url: formatAdminURL({\n            adminRoute,\n            path: `/globals/${globalSlug}`,\n          }),\n        },\n        {\n          label: 'Versions',\n          url: formatAdminURL({\n            adminRoute,\n            path: `/globals/${globalSlug}/versions`,\n          }),\n        },\n        {\n          label: versionToCreatedAtFormatted,\n        },\n      ])\n    }\n  }, [\n    config,\n    setStepNav,\n    id,\n    isTrashed,\n    locale,\n    t,\n    i18n,\n    collectionConfig,\n    globalConfig,\n    versionToUseAsTitle,\n    versionToCreatedAtFormatted,\n    versionToID,\n  ])\n\n  return null\n}\n"],"mappings":"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","ignoreList":[]}